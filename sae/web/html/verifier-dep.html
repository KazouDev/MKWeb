<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/verifier-dep.css">
    <title>Document</title>   
</head>
<body>
    <div class="wrapper">
        <main class="main">
            <div class="main__container">
                <div class="select-container">
                    <button class="dropbtn" id="dropdown-btn">Où?</button>
                    <div class="dropdown" id="departments-dropdown-container">
                      <div class="dropdown-content"  id="departments-dropdown">
                        <input class="dropdown-element search" type="text" id="search-input-department"  placeholder="Département" >
                        <label class="dropdown-element dep"><input type="checkbox" name="department" value="Ain" >Ain</label>
                        <label class="dropdown-element dep"><input type="checkbox" name="department" value="Aisne" >Aisne</label>
                      </div>
                    </div>
                    <div class="dropdown" id="communs-dropdown-container">
                      <div class="dropdown-content" id="communes-dropdown">
                        <input class="dropdown-element search" type="text" id="search-input-commune" placeholder="Commune" >
                        <label class="dropdown-element"><input type="checkbox" name="commune" value="Bourg-en-Bresse" >Bourg-en-Bresse</label>
                        <label class="dropdown-element"><input type="checkbox" name="commune" value="L'Abergement-Clémenciat" >L'Abergement-Clémenciat</label>
                      </div>
                    </div>
                  </div>
            </div>
        </main>
    </div>
    <script>
        const dropdownBtn = document.getElementById('dropdown-btn');
        const dropdownContent = document.getElementById('departments-dropdown');
        function showDropdownContent() {
            dropdownContent.style.display = 'inline-flex';
        }
        function hideDropdownContent() {
            if (!dropdownBtn.matches(':hover') && !dropdownContent.matches(':hover')) {
                dropdownContent.style.display = 'none';
            }
        }
        dropdownBtn.addEventListener('mouseenter', showDropdownContent);

        document.addEventListener('mouseleave', hideDropdownContent);

        const departmentCheckboxes = document.querySelectorAll('input[name="department"]');

        function handleDepartmentSelection() {

            departmentCheckboxes.forEach(function(checkbox) {
                
                checkbox.addEventListener('change', function() {
                    
                    if (this.checked) {
                        const communesDropdown = document.getElementById('communes-dropdown');
                        communesDropdown.style.display = 'inline-block';
                    } else {
                        const communesDropdown = document.getElementById('communes-dropdown');
                        communesDropdown.style.display = 'none';
                    }
                });
            });
        }
        handleDepartmentSelection();

    </script>
</body>
</html>
